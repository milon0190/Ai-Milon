<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- ADVANCED SEO META TAGS -->
    <title>TikTok Video Download Without Watermark - 8K Ultra HD | Aimilon.pro.bd</title>
    <meta name="description" content="The best free tool to download TikTok videos without watermark. Supports 8K Ultra HD, MP3 Audio, and Cover Images. Fast, unlimited, and secure TikTok downloader.">
    <meta name="keywords" content="TikTok video download without watermark, TikTok without watermark video download, 8K TikTok downloader, TikTok to MP3, save TikTok video, Aimilon downloader, TikTok video saver, hd tiktok download">
    <meta name="robots" content="index, follow">
    <meta name="author" content="Md Milon">
    <link rel="canonical" href="https://aimilon.pro.bd/">

    <!-- Open Graph / Social Media -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://aimilon.pro.bd/">
    <meta property="og:title" content="TikTok Video Download Without Watermark - 8K Ultra HD">
    <meta property="og:description" content="Download TikTok videos in 8K without watermark. No login, fast and free.">
    <meta property="og:image" content="https://cdn-icons-png.flaticon.com/512/5968/5968760.png">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="TikTok Video Download Without Watermark">
    <meta name="twitter:description" content="Download TikTok videos in 8K Ultra HD without watermark.">

    <!-- PWA & Mobile -->
    <meta name="theme-color" content="#00f2ea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
    <!-- Structured Data for Google (Schema.org) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "Aimilon TikTok Downloader",
      "url": "https://aimilon.pro.bd",
      "description": "Download TikTok videos without watermark in 8K Ultra HD quality.",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "All",
      "browserRequirements": "Requires JavaScript. Requires HTML5.",
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "USD"
      },
      "featureList": "No Watermark, 8K Support, Audio Download, Image Download",
      "author": {
        "@type": "Person",
        "name": "Md Milon",
        "url": "https://t.me/TechbyMilon"
      }
    }
    </script>

    <!-- Dynamic Manifest -->
    <link rel="manifest" id="my-manifest">

    <!-- Premium SVG Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><defs><linearGradient id='a' x1='0%25' y1='0%25' x2='100%25' y2='100%25'><stop offset='0%25' stop-color='%2300f2ea'/><stop offset='100%25' stop-color='%23ff0050'/></linearGradient></defs><rect width='100' height='100' rx='20' fill='%23030305'/><path d='M50 20 L65 40 L85 35 L70 55 L75 80 L50 65 L25 80 L30 55 L15 35 L35 40 Z' fill='url(%23a)' stroke='white' stroke-width='2'/></svg>">
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;800&family=Space+Grotesk:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            --bg-dark: #030305;
            --primary-glow: #00f2ea;
            --secondary-glow: #ff0050;
            --glass-bg: rgba(255, 255, 255, 0.03);
            --glass-border: rgba(255, 255, 255, 0.1);
            --text-white: #ffffff;
            --text-gray: #8b9bb4;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; outline: none; -webkit-tap-highlight-color: transparent; }
        body {
            font-family: 'Outfit', sans-serif; background-color: var(--bg-dark);
            color: var(--text-white); min-height: 100vh; overflow-x: hidden;
            position: relative; display: flex; flex-direction: column;
        }

        /* Ambient Background */
        .ambient-light { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; overflow: hidden; background: radial-gradient(circle at 50% 50%, #0a0a0f 0%, #000000 100%); }
        .orb { position: absolute; border-radius: 50%; filter: blur(80px); opacity: 0.5; animation: float 20s infinite ease-in-out; }
        .orb-1 { width: 400px; height: 400px; background: var(--secondary-glow); top: -100px; left: -100px; }
        .orb-2 { width: 500px; height: 500px; background: var(--primary-glow); bottom: -100px; right: -100px; animation-delay: -5s; }
        .orb-3 { width: 300px; height: 300px; background: #7000ff; top: 40%; left: 40%; animation-delay: -10s; }
        @keyframes float { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -50px) scale(1.1); } 66% { transform: translate(-20px, 20px) scale(0.9); } }

        /* Navbar */
        nav { display: flex; justify-content: space-between; align-items: center; padding: 1rem 5%; backdrop-filter: blur(10px); border-bottom: 1px solid var(--glass-border); position: sticky; top: 0; z-index: 100; background: rgba(3, 3, 5, 0.8); }
        .logo { font-family: 'Space Grotesk', sans-serif; font-weight: 700; font-size: 1.5rem; color: var(--text-white); text-decoration: none; display: flex; align-items: center; gap: 10px; }
        .logo span { color: var(--primary-glow); }
        .nav-actions { display: flex; gap: 10px; align-items: center; }

        .pro-badge { background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.02)); border: 1px solid var(--glass-border); padding: 6px 12px; border-radius: 100px; font-size: 0.75rem; font-weight: 600; color: var(--primary-glow); white-space: nowrap; }
        .install-btn { background: rgba(255, 255, 255, 0.1); border: 1px solid var(--primary-glow); color: var(--primary-glow); padding: 8px 16px; border-radius: 100px; font-size: 0.85rem; font-weight: 600; cursor: pointer; transition: all 0.3s; display: none; align-items: center; gap: 6px; backdrop-filter: blur(5px); }
        .install-btn:hover { background: var(--primary-glow); color: #000; box-shadow: 0 0 15px var(--primary-glow); }

        /* Ads */
        .ad-wrapper { display: flex; justify-content: center; align-items: center; margin: 1.5rem auto; width: 100%; overflow: hidden; }
        .leaderboard-ad { max-width: 728px; height: 90px; display: block; }
        .rectangle-ad { width: 300px; height: 250px; margin: 2rem auto; }
        @media (max-width: 730px) { .leaderboard-ad { display: none; } }

        /* Main Container */
        .container { max-width: 1100px; margin: 0 auto; padding: 1rem 1.5rem; width: 100%; flex: 1; display: flex; flex-direction: column; align-items: center; }

        /* Hero */
        .hero { text-align: center; margin-bottom: 2rem; margin-top: 1rem; position: relative; z-index: 1; }
        .hero h1 { font-family: 'Space Grotesk', sans-serif; font-size: 2.5rem; margin-bottom: 1rem; background: linear-gradient(180deg, #fff 0%, #aaa 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
        .hero p { color: var(--text-gray); font-size: 1rem; max-width: 600px; margin: 0 auto; }
        
        .highlight-text { color: var(--primary-glow); font-weight: 700; }

        /* Input */
        .search-container { position: relative; width: 100%; max-width: 700px; margin: 0 auto; }
        .input-glow-wrapper { position: absolute; inset: -2px; background: linear-gradient(45deg, var(--secondary-glow), transparent, var(--primary-glow), transparent); border-radius: 20px; z-index: -1; filter: blur(10px); opacity: 0.5; transition: opacity 0.3s; }
        .search-container:focus-within .input-glow-wrapper { opacity: 1; filter: blur(15px); }
        .input-bar { display: flex; align-items: center; background: rgba(10, 10, 12, 0.8); backdrop-filter: blur(20px); border: 1px solid var(--glass-border); border-radius: 18px; padding: 8px; box-shadow: 0 20px 40px rgba(0,0,0,0.4); }
        .search-input { flex: 1; background: transparent; border: none; color: white; padding: 1rem; font-size: 1rem; }
        .search-input::placeholder { color: rgba(255,255,255,0.3); }
        .paste-btn { background: rgba(255,255,255,0.05); border: none; color: var(--text-gray); padding: 0.8rem; border-radius: 12px; cursor: pointer; margin-right: 8px; }
        .go-btn { background: linear-gradient(135deg, var(--secondary-glow), #d40045); color: white; border: none; padding: 0.8rem 2rem; border-radius: 12px; font-weight: 600; cursor: pointer; transition: transform 0.2s; }
        .go-btn:hover { transform: translateY(-2px); }

        @media (max-width: 600px) {
            .input-bar { flex-direction: column; gap: 10px; padding: 10px; }
            .go-btn { width: 100%; }
            .hero h1 { font-size: 1.8rem; }
        }

        /* Dashboard */
        .dashboard { display: none; width: 100%; background: var(--glass-bg); backdrop-filter: blur(40px); border: 1px solid var(--glass-border); border-radius: 32px; overflow: hidden; box-shadow: 0 50px 100px rgba(0,0,0,0.5); animation: fadeInUp 0.8s cubic-bezier(0.2, 0.8, 0.2, 1); margin-bottom: 2rem; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
        .dash-grid { display: grid; grid-template-columns: 1fr; }
        @media (min-width: 900px) { .dash-grid { grid-template-columns: 400px 1fr; } }

        .preview-area { background: #000; position: relative; display: flex; align-items: center; justify-content: center; min-height: 400px; }
        video { width: 100%; height: 100%; object-fit: contain; }
        .video-tag { position: absolute; top: 10px; left: 10px; background: rgba(0,0,0,0.8); padding: 4px 8px; border-radius: 4px; font-size: 0.7rem; color: var(--primary-glow); border: 1px solid var(--primary-glow); font-weight: bold; backdrop-filter: blur(4px); }

        .content-area { padding: 2rem; }
        .user-meta { display: flex; align-items: center; gap: 1rem; margin-bottom: 1.5rem; }
        .avatar { width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--primary-glow); }
        .caption { background: rgba(255,255,255,0.03); border: 1px solid var(--glass-border); padding: 1rem; border-radius: 12px; margin-bottom: 1.5rem; font-size: 0.9rem; max-height: 100px; overflow-y: auto; }
        
        .tabs { display: flex; background: rgba(0,0,0,0.3); padding: 4px; border-radius: 100px; margin-bottom: 1.5rem; }
        .tab-btn { flex: 1; background: transparent; border: none; color: var(--text-gray); padding: 10px; border-radius: 100px; cursor: pointer; transition: 0.3s; font-size: 0.9rem; }
        .tab-btn.active { background: white; color: black; font-weight: bold; }

        .dl-list { display: none; flex-direction: column; gap: 10px; }
        .dl-list.active { display: flex; }
        .dl-item { display: flex; justify-content: space-between; align-items: center; background: rgba(255,255,255,0.05); padding: 12px; border-radius: 12px; transition: background 0.2s; }
        .dl-item:hover { background: rgba(255,255,255,0.1); }
        .dl-info-text { font-size: 0.9rem; display: flex; flex-direction: column; }
        .dl-sub { font-size: 0.75rem; color: var(--text-gray); }
        .dl-btn { background: var(--primary-glow); color: #000; border: none; padding: 8px 16px; border-radius: 8px; font-weight: bold; cursor: pointer; transition: transform 0.2s; }
        .dl-btn:hover { transform: scale(1.05); }

        /* Loader */
        .loader { display: none; flex-direction: column; align-items: center; margin: 2rem 0; }
        .spinner { width: 40px; height: 40px; border: 4px solid rgba(255,255,255,0.1); border-top-color: var(--primary-glow); border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { to { transform: rotate(360deg); } }

        /* Toast */
        .toast { position: fixed; bottom: 20px; right: 20px; background: rgba(20,20,20,0.95); color: white; padding: 12px 24px; border-radius: 8px; border-left: 4px solid var(--primary-glow); transform: translateY(100px); transition: 0.3s; z-index: 1000; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .toast.show { transform: translateY(0); }

        /* SEO Content Section */
        .seo-content { width: 100%; max-width: 800px; margin-top: 4rem; margin-bottom: 2rem; text-align: left; padding: 2rem; background: rgba(255,255,255,0.02); border-radius: 20px; border: 1px solid var(--glass-border); }
        .seo-content h2 { font-family: 'Space Grotesk', sans-serif; color: var(--primary-glow); margin-bottom: 1rem; font-size: 1.5rem; }
        .seo-content h3 { color: white; margin: 1.5rem 0 0.8rem; font-size: 1.2rem; }
        .seo-content p { color: var(--text-gray); line-height: 1.6; margin-bottom: 1rem; font-size: 0.95rem; }
        .seo-content ul { margin-left: 20px; color: var(--text-gray); margin-bottom: 1rem; }
        .seo-content li { margin-bottom: 5px; }

        /* Footer */
        footer { background: rgba(5, 5, 8, 0.95); backdrop-filter: blur(15px); border-top: 1px solid var(--glass-border); padding: 3rem 1.5rem 1.5rem; margin-top: auto; position: relative; z-index: 10; }
        .footer-container { max-width: 1100px; margin: 0 auto; display: flex; flex-direction: column; align-items: center; gap: 1.5rem; text-align: center; }
        .footer-brand { font-family: 'Space Grotesk', sans-serif; font-size: 1.5rem; font-weight: 700; color: white; display: flex; align-items: center; gap: 8px; }
        .footer-divider { width: 50px; height: 2px; background: linear-gradient(90deg, transparent, var(--primary-glow), transparent); opacity: 0.5; }
        .footer-info p { font-size: 0.85rem; color: var(--text-gray); margin-bottom: 0.5rem; max-width: 600px; }
        .developer-line { font-size: 0.95rem; color: #fff; font-weight: 400; display: flex; align-items: center; gap: 6px; justify-content: center; flex-wrap: wrap; }
        .dev-link { color: var(--primary-glow); font-weight: 700; text-transform: uppercase; letter-spacing: 1px; position: relative; cursor: pointer; transition: all 0.3s; text-decoration: none; display: inline-flex; align-items: center; gap: 5px; }
        .dev-link:hover { text-shadow: 0 0 10px rgba(0, 242, 234, 0.6); transform: translateY(-2px); }
    </style>
</head>
<body>

    <!-- Ambient Background -->
    <div class="ambient-light">
        <div class="orb orb-1"></div>
        <div class="orb orb-2"></div>
        <div class="orb orb-3"></div>
    </div>

    <nav>
        <a href="#" class="logo"><i class="fa-solid fa-bolt" style="color:var(--primary-glow)"></i> aimilon<span>.pro.bd</span></a>
        <div class="nav-actions">
            <button id="installBtn" class="install-btn"><i class="fa-solid fa-download"></i> Install App</button>
            <div class="pro-badge">8K Ultra HD</div>
        </div>
    </nav>

    <!-- LEADERBOARD AD -->
    <div class="container" style="padding-top: 0;">
        <div class="ad-wrapper leaderboard-ad">
            <script type="text/javascript">
                atOptions = {
                    'key' : '406a661726d17ec5a5b23b5ad1a7de2a',
                    'format' : 'iframe',
                    'height' : 90,
                    'width' : 728,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="https://www.highperformanceformat.com/406a661726d17ec5a5b23b5ad1a7de2a/invoke.js"></script>
        </div>
    </div>

    <div class="container">
        <!-- Hero Section (SEO Optimized H1) -->
        <div class="hero">
            <h1>TikTok Video Download Without Watermark</h1>
            <p>Download <span class="highlight-text">8K Ultra HD</span> videos, MP3 audio, and covers without watermark. Free, unlimited & secure.</p>
        </div>

        <!-- Input -->
        <div class="search-container">
            <div class="input-glow-wrapper"></div>
            <div class="input-bar">
                <button class="paste-btn" id="pasteBtn"><i class="fa-regular fa-paste"></i></button>
                <input type="text" class="search-input" id="urlInput" placeholder="Paste TikTok link here...">
                <button class="go-btn" id="startBtn">Download</button>
            </div>
        </div>

        <!-- RECTANGLE AD -->
        <div class="ad-wrapper rectangle-ad">
            <script type="text/javascript">
                atOptions = {
                    'key' : '53e2d0b96010c8fbeba1523ee5923dcb',
                    'format' : 'iframe',
                    'height' : 250,
                    'width' : 300,
                    'params' : {}
                };
            </script>
            <script type="text/javascript" src="https://www.highperformanceformat.com/53e2d0b96010c8fbeba1523ee5923dcb/invoke.js"></script>
        </div>

        <!-- Loader -->
        <div class="loader" id="loader">
            <div class="spinner"></div>
            <p style="margin-top:10px; color:#aaa;">Fetching 8K Ultra HD source...</p>
        </div>

        <!-- Dashboard -->
        <div class="dashboard" id="dashboard">
            <div class="dash-grid">
                <div class="preview-area">
                    <div class="video-tag"><i class="fa-solid fa-crown"></i> ORIGINAL QUALITY</div>
                    <video id="mainVideo" controls loop playsinline>
                        <source src="" type="video/mp4">
                    </video>
                </div>
                <div class="content-area">
                    <div class="user-meta">
                        <img src="" alt="User" class="avatar" id="avatar">
                        <div>
                            <h3 id="username" style="font-size:1.1rem;">@username</h3>
                            <span id="date" style="font-size:0.8rem; color:#888;">TikTok User</span>
                        </div>
                    </div>
                    <div class="caption" id="caption">Loading description...</div>

                    <div class="tabs">
                        <button class="tab-btn active" onclick="switchTab('video', this)">Video</button>
                        <button class="tab-btn" onclick="switchTab('audio', this)">Audio</button>
                        <button class="tab-btn" onclick="switchTab('image', this)">Photo</button>
                    </div>

                    <div id="opt-video" class="dl-list active">
                        <div class="dl-item">
                            <div class="dl-info-text">
                                <span><i class="fa-solid fa-video"></i> 8K / 4K Ultra HD (MP4)</span>
                                <span class="dl-sub">Original Quality • No Watermark</span>
                            </div>
                            <button class="dl-btn" onclick="forceDownload('tiktok_8k_ultra_hd.mp4')">Save</button>
                        </div>
                    </div>
                    <div id="opt-audio" class="dl-list">
                        <div class="dl-item">
                            <div class="dl-info-text">
                                <span><i class="fa-solid fa-music"></i> Original Sound</span>
                                <span class="dl-sub">High Quality MP3 • 320kbps</span>
                            </div>
                            <button class="dl-btn" onclick="forceDownload('tiktok_audio_mp3.mp3')">Save</button>
                        </div>
                    </div>
                    <div id="opt-image" class="dl-list">
                        <div class="dl-item">
                            <div class="dl-info-text">
                                <span><i class="fa-solid fa-image"></i> Cover Photo</span>
                                <span class="dl-sub">High Resolution JPG</span>
                            </div>
                            <button class="dl-btn" onclick="downloadImage()">Save</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SEO CONTENT SECTION (Crucial for Google Top Ranking) -->
        <article class="seo-content">
            <h2>Why Choose Aimilon for TikTok Video Download?</h2>
            <p>Aimilon.pro.bd is the most advanced tool to <strong>download TikTok videos without watermark</strong>. We support up to 8K Ultra HD resolution, ensuring you get the highest quality available. Whether you are using a mobile device or a desktop, our web app installation system makes it easy to save videos directly to your device.</p>
            
            <h3>Key Features:</h3>
            <ul>
                <li><strong>No Watermark:</strong> Download clean videos directly from the source.</li>
                <li><strong>8K Ultra HD Support:</strong> Automatically detects and downloads the highest available quality (up to 8K).</li>
                <li><strong>Audio Download:</strong> Extract MP3 music from TikTok videos in one click.</li>
                <li><strong>Web App:</strong> Install our tool on your phone or computer for faster access.</li>
                <li><strong>Unlimited & Free:</strong> No registration, no fees, unlimited downloads.</li>
            </ul>

            <h3>How to Download TikTok Videos Without Watermark?</h3>
            <p>Using our TikTok without watermark video downloader is simple:</p>
            <ol style="margin-left: 20px; color: var(--text-gray); line-height: 1.8;">
                <li>Copy the link of the TikTok video you want to download.</li>
                <li>Paste the link into the input box above on Aimilon.pro.bd.</li>
                <li>Click the "Download" button.</li>
                <li>Wait for the 8K quality video to process, then choose to save Video, Audio, or Photo.</li>
            </ol>
        </article>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-container">
            <div class="footer-brand"><i class="fa-solid fa-bolt" style="color:var(--primary-glow)"></i> aimilon<span>.pro.bd</span></div>
            <div class="footer-divider"></div>
            <div class="footer-info">
                <p>&copy; 2024 aimilon.pro.bd. All Rights Reserved.</p>
                <p style="font-size: 0.75rem; color: #666; max-width: 500px;">
                    Disclaimer: We do not host any video content on our servers. All rights belong to their respective owners. This tool is for personal use only.
                </p>
                <div class="developer-line">Designed & Developed by <a href="https://t.me/TechbyMilon" target="_blank" class="dev-link">Md Milon <i class="fa-brands fa-telegram"></i></a></div>
            </div>
        </div>
    </footer>

    <!-- Toast -->
    <div class="toast" id="toast">Success message here</div>

    <!-- ADS -->
    <script src="https://pl27189076.effectivegatecpm.com/d3/34/70/d33470de5b955ea469749ee149172f22.js"></script>
    <script src="https://pl27189054.effectivegatecpm.com/d8/1d/28/d81d28eab84a3943addd6a566a15af88.js"></script>

    <script>
        // --- 1. DYNAMIC MANIFEST GENERATION ---
        const manifest = {
            "name": "Aimilon 8K TikTok Downloader",
            "short_name": "Aimilon",
            "start_url": ".",
            "display": "standalone",
            "background_color": "#030305",
            "theme_color": "#00f2ea",
            "icons": [
                { "src": "https://cdn-icons-png.flaticon.com/512/5968/5968760.png", "sizes": "192x192", "type": "image/png" },
                { "src": "https://cdn-icons-png.flaticon.com/512/5968/5968760.png", "sizes": "512x512", "type": "image/png" }
            ]
        };
        const stringManifest = JSON.stringify(manifest);
        const blobManifest = new Blob([stringManifest], {type: 'application/json'});
        const manifestURL = URL.createObjectURL(blobManifest);
        document.getElementById('my-manifest').setAttribute('href', manifestURL);

        // --- 2. PWA INSTALLATION LOGIC ---
        let deferredPrompt;
        const installBtn = document.getElementById('installBtn');
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            installBtn.style.display = 'flex';
        });
        installBtn.addEventListener('click', (e) => {
            installBtn.style.display = 'none';
            if (deferredPrompt) {
                deferredPrompt.prompt();
                deferredPrompt.userChoice.then((choiceResult) => { deferredPrompt = null; });
            }
        });
        window.addEventListener('appinstalled', () => {
            installBtn.style.display = 'none';
            showToast('App Installed Successfully!');
        });

        // --- 3. API & LOGIC ---
        const urlInput = document.getElementById('urlInput');
        const pasteBtn = document.getElementById('pasteBtn');
        const startBtn = document.getElementById('startBtn');
        const loader = document.getElementById('loader');
        const dashboard = document.getElementById('dashboard');
        const toast = document.getElementById('toast');
        const mainVideo = document.getElementById('mainVideo');

        let currentVideoUrl = "";
        let currentCoverUrl = "";
        let currentAudioUrl = "";

        async function processLink() {
            const url = urlInput.value.trim();
            if(!url || !url.includes('tiktok.com')) {
                showToast('Please enter a valid TikTok URL', 'error');
                return;
            }
            dashboard.style.display = 'none';
            loader.style.display = 'flex';
            startBtn.disabled = true;
            startBtn.innerText = 'Processing...';

            try {
                // Using tikwm API
                const apiUrl = `https://www.tikwm.com/api/?url=${encodeURIComponent(url)}`;
                const response = await fetch(apiUrl);
                const data = await response.json();

                if(data.code === 0 && data.data) {
                    currentVideoUrl = data.data.play; 
                    currentCoverUrl = data.data.cover;
                    currentAudioUrl = data.data.music; // MP3 URL
                    
                    renderResult({
                        username: data.data.author.unique_id || 'tiktok_user',
                        avatar: data.data.author.avatar,
                        caption: data.data.title,
                        video: currentVideoUrl,
                        cover: currentCoverUrl
                    });
                    showToast('Video fetched successfully!');
                } else {
                    throw new Error('Video not found or private');
                }
            } catch (error) {
                console.error(error);
                showToast('Error fetching video. Try again.', 'error');
            } finally {
                loader.style.display = 'none';
                startBtn.disabled = false;
                startBtn.innerText = 'Download';
            }
        }

        function renderResult(data) {
            document.getElementById('username').innerText = '@' + data.username;
            document.getElementById('avatar').src = data.avatar;
            const formattedCaption = data.caption.replace(/(#\w+)/g, '<span style="color:var(--primary-glow); font-weight:600;">$1</span>');
            document.getElementById('caption').innerHTML = formattedCaption;
            mainVideo.src = data.video;
            mainVideo.poster = data.cover;
            dashboard.style.display = 'block';
            mainVideo.play().catch(e => {});
        }

        // Video Download
        window.forceDownload = function(filename) {
            if(!currentVideoUrl) { showToast('No video source', 'error'); return; }
            showToast('Downloading...');
            fetch(currentVideoUrl)
                .then(response => response.blob())
                .then(blob => {
                    const blobUrl = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = blobUrl; a.download = filename;
                    document.body.appendChild(a); a.click();
                    window.URL.revokeObjectURL(blobUrl);
                    document.body.removeChild(a);
                })
                .catch(error => { window.open(currentVideoUrl, '_blank'); });
        };

        // Audio Download (Blob method)
        window.forceDownload = function(filename) {
            // If filename is audio, use audio URL
            if(filename.includes('mp3')) {
                if(!currentAudioUrl) return;
                showToast('Downloading Audio...');
                // Direct link opening usually works better for audio cross-origin in simple clients
                window.open(currentAudioUrl, '_blank'); 
            } else {
                // Video logic
                if(!currentVideoUrl) return;
                showToast('Downloading Video...');
                fetch(currentVideoUrl)
                .then(response => response.blob())
                .then(blob => {
                    const blobUrl = window.URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = blobUrl; a.download = filename;
                    document.body.appendChild(a); a.click();
                    window.URL.revokeObjectURL(blobUrl);
                    document.body.removeChild(a);
                })
                .catch(() => window.open(currentVideoUrl, '_blank'));
            }
        };

        // Image Download
        window.downloadImage = function() {
            if(!currentCoverUrl) return;
            const a = document.createElement('a');
            a.href = currentCoverUrl; a.download = 'tiktok_cover.jpg'; a.target = '_blank';
            document.body.appendChild(a); a.click(); document.body.removeChild(a);
        };

        pasteBtn.addEventListener('click', async () => {
            try { const text = await navigator.clipboard.readText(); urlInput.value = text; showToast('Link Pasted'); } catch (err) {}
        });
        startBtn.addEventListener('click', processLink);
        urlInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') processLink(); });
        window.switchTab = function(type, btn) {
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.querySelectorAll('.dl-list').forEach(l => l.classList.remove('active'));
            document.getElementById('opt-' + type).classList.add('active');
        };
        function showToast(msg, type = 'success') {
            toast.innerText = msg;
            toast.style.borderLeftColor = type === 'error' ? '#ff4444' : 'var(--primary-glow)';
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }
    </script>
</body>
</html>
